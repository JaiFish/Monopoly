{"version":3,"sources":["assets\\Script\\Class\\Message\\GetProps.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ButtonMng from '../../Data/base/ButtonMng';\r\nimport ComponentBase from '../../Data/base/ComponentBase';\r\nimport MusciMng from '../../Data/base/MusciMng';\r\nimport { Commamnd } from '../../Enum/Commad';\r\nimport { Easing } from '../../Enum/Easing';\r\nimport { GameEvent } from '../../Enum/GameEvent';\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GetProps extends ComponentBase {\r\n    btn: cc.Button;\r\n    Props: cc.Sprite;\r\n    info: cc.Label\r\n    protected onLoad(): void {\r\n        this.btn = cc.find(\"Item_Btn\", this.node).getComponent(cc.Button)\r\n        this.Props = cc.find(\"Props\", this.node).getComponent(cc.Sprite)\r\n        this.info = cc.find(\"Info\", this.node).getComponent(cc.Label)\r\n        this.defaultReset()\r\n    }\r\n    protected start(): void {\r\n        ButtonMng.addEvent(this.node, \"GetProps\", \"end\", this.btn)\r\n    }\r\n    reset() {\r\n        this.Props.spriteFrame = null;\r\n        this.info.string = \"\"\r\n    }\r\n    setData(_info: string, _sprite: cc.SpriteFrame) {\r\n        this.info.string = _info\r\n        this.Props.spriteFrame = _sprite;\r\n    }\r\n    actionShow(callback?: Function): Promise<void> {\r\n        return new Promise<void>((resolve, reject) => {\r\n            this.show()\r\n            let setScale = 1\r\n            this.node.opacity = 255\r\n            this.node.setPosition(0, 0)\r\n            if (this.Props.spriteFrame.name.split('_')[1] == \"5\")//如果是碼表要做特殊處理。因為圖片太大\r\n                setScale = 0.651\r\n            let action1 = cc.tween()\r\n                .set({ scale: 0.1 })\r\n                .to(0.5, { scale: setScale }, { easing: Easing.backOut })\r\n            callback ?\r\n                action1.call(callback.bind(this)).call(resolve).clone(this.Props.node).start() :\r\n                action1.call(resolve).clone(this.Props.node).start();\r\n        })\r\n    }\r\n    end(e: cc.Event, _customEventData: string) {\r\n        MusciMng.effectPlay(\"BtnClick\")\r\n        this.EventEmit(GameEvent.SendCommand, Commamnd.EndGetProps)\r\n    }\r\n}"]}