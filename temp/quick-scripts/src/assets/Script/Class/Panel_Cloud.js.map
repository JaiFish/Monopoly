{"version":3,"sources":["assets\\Script\\Class\\Panel_Cloud.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import AssetMng from '../Asset/AssetMng';\r\nimport DataCloud from '../Data/DataCloud';\r\nimport { GameEvent } from '../Enum/GameEvent';\r\nimport CloudItem from '../Item/CloudItem';\r\nexport default class Panel_Cloud extends DataCloud {\r\n    item: cc.Node;\r\n    cloudContent: cc.Node;\r\n    isInstanceCloud: boolean;\r\n    protected onLoad(): void {\r\n        this.cloudContent = cc.find(\"nContent\", this.node)\r\n        this.item = cc.find(\"item\", this.node)\r\n        this.temp_Left = 0\r\n        this.temp_Right = 0\r\n        this.tempNumber = 0;\r\n        this.randomTime_Left = 1 + Math.floor(Math.random() * this.rangeTime_Left)\r\n        this.randomTime_Right = 1 + Math.floor(Math.random() * this.rangeTime_Right)\r\n\r\n        this.initEvent(GameEvent.StopCloud, this.stopCloud)\r\n        this.initEvent(GameEvent.StartCloud, this.startCloud)\r\n        this.initEvent(GameEvent.DeletCloud, this.deletCloud)\r\n    }\r\n\r\n    protected start(): void {\r\n        this.isInstanceCloud = true\r\n        //生成10個雲\r\n        cc.tween(this.node)\r\n            .repeat(10, cc.tween()\r\n                .delay(.1)\r\n                .call(this.instItem.bind(this))\r\n            )\r\n            .start()\r\n    }\r\n    protected update(dt: number): void {\r\n        if (this.isInstanceCloud) {\r\n            this.temp_Left += dt;\r\n            this.temp_Right += dt;\r\n\r\n            if (this.temp_Left > this.randomTime_Left) {\r\n                this.instItem();\r\n                this.randomTime_Left = this.baseTime_Left + Math.floor(Math.random() * this.rangeTime_Left)\r\n                this.temp_Left = 0\r\n            }\r\n            if (this.temp_Right > this.randomTime_Right) {\r\n                this.instItem();\r\n                this.randomTime_Right = this.baseTime_Right + Math.floor(Math.random() * this.rangeTime_Right)\r\n                this.temp_Right = 0\r\n            }\r\n        }\r\n    }\r\n    instItem(): void {\r\n        let temp = cc.instantiate(this.item)\r\n        this.cloudContent.addChild(temp)\r\n        let _class = temp.addComponent(CloudItem)\r\n        _class.Speed = this.baseSpeed + (Math.random() * this.rangeSpeed)\r\n        _class.direction = Math.random() > 0.5 ? 1 : -1;//左右方向相反\r\n        temp.setPosition(Math.random() * this.rangeX, Math.random() * this.rangeY)\r\n        _class.isCanGO = true;\r\n        _class.targetX = _class.direction == 1 ? 1280 : -1280\r\n        _class.cloudNumber = this.tempNumber;\r\n        this.CloudClass.set(this.tempNumber, _class)\r\n\r\n        let randomCloud = 1 + Math.floor(Math.random() * 10)\r\n        let format = randomCloud < 9 ? \"0\" + String(randomCloud) : String(randomCloud)\r\n        temp.getComponent(cc.Sprite).spriteFrame = AssetMng.data_SprtieAtlas.get(\"雲-\" + format)//隨機1~10的雲\r\n\r\n        if (randomCloud > 0 && randomCloud < 5) temp.setScale(0.5) //因為雲為了解析度有放大\r\n        this.tempNumber++\r\n    }\r\n    stopCloud() {\r\n        this.isInstanceCloud = false\r\n        this.CloudClass.forEach((val: CloudItem, key: Number) => {\r\n            val.isCanGO = false;\r\n        })\r\n    }\r\n    startCloud() {\r\n        this.isInstanceCloud = true\r\n        this.CloudClass.forEach((val: CloudItem, key: Number) => {\r\n            val.isCanGO = true;\r\n        })\r\n    }\r\n    deletCloud(_num: number) {\r\n        this.CloudClass.get(_num).node.destroy()\r\n        this.CloudClass.delete(_num);\r\n    }\r\n}\r\n"]}