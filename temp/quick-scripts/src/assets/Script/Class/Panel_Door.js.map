{"version":3,"sources":["assets\\Script\\Class\\Panel_Door.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ButtonMng from '../Data/base/ButtonMng';\r\nimport ComponentBase from '../Data/base/ComponentBase';\r\nimport MusciMng from '../Data/base/MusciMng';\r\nimport { Commamnd } from '../Enum/Commad';\r\nimport { GameEvent } from '../Enum/GameEvent';\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Panel_Door extends ComponentBase {\r\n    left: cc.Node;\r\n    right: cc.Node;\r\n    distance: number = 272.58;//左右的最遠尺\r\n    btn_Start: cc.Button;\r\n\r\n    protected onLoad(): void {\r\n        this.left = cc.find(\"left\", this.node)\r\n        this.right = cc.find(\"right\", this.node)\r\n        this.btn_Start = cc.find(\"Item_Btn\", this.node).getComponent(cc.Button)\r\n        this.initEvent(GameEvent.OpenDoor, this.openDoor)\r\n        this.initEvent(GameEvent.CloseDoor, this.closeDoor)\r\n        this.defaultReset()\r\n    }\r\n    protected start(): void {\r\n        ButtonMng.addEvent(this.node, \"Panel_Door\", \"sendMainInit\", this.btn_Start)\r\n    }\r\n\r\n    reset() {\r\n        this.left.x = 0\r\n        this.right.x = 0\r\n        this.show()\r\n        // this.left.active = false\r\n        // this.right.active = false\r\n        // this.EventEmit(GameEvent.ShowAllView)\r\n    }\r\n    sendMainInit(e: cc.Event, _customEventData: string) {\r\n        MusciMng.effectPlay(\"BtnClick\")\r\n        ButtonMng.reMoveEvent(this.btn_Start, \"sendMainInit\")\r\n        this.EventEmit(GameEvent.SendCommand, Commamnd.MainInit)\r\n    }\r\n    sendDoorAgainGame(e: cc.Event, _customEventData: string) {\r\n        MusciMng.effectPlay(\"BtnClick\")\r\n        this.EventEmit(GameEvent.SendCommand, Commamnd.DoorAgainGame)\r\n    }\r\n    async openDoor() {\r\n        return new Promise<void>((resolve, reject) => {\r\n            this.left.active = true\r\n            this.right.active = true\r\n            cc.tween(this.left)\r\n                .call(() => {\r\n                    this.btn_Start.node.active = false\r\n                })\r\n                .by(2, { x: -this.distance })\r\n                .start()\r\n            cc.tween(this.right)\r\n                .by(2, { x: this.distance })\r\n                .call(resolve)\r\n                .start()\r\n\r\n        })\r\n\r\n    }\r\n    async closeDoor() {\r\n        cc.tween(this.left)\r\n            .by(1, { x: this.distance })\r\n            .call(() => {\r\n                this.btn_Start.node.active = true\r\n                ButtonMng.addEvent(this.node, \"Panel_Door\", \"sendDoorAgainGame\", this.btn_Start)\r\n            })\r\n            .start()\r\n        cc.tween(this.right)\r\n            .by(1, { x: -this.distance })\r\n\r\n            .start()\r\n    }\r\n    async scaleAction() {\r\n        return new Promise<void>((resolve, reject) => {\r\n            cc.tween(this.node)\r\n                .to(0.5, { scale:2.35 })\r\n                .call(() => {\r\n                    this.node.active = false\r\n                    resolve()\r\n                })\r\n                .start()\r\n\r\n        })\r\n    }\r\n    async backScaleAction() {\r\n        return new Promise<void>((resolve, reject) => {\r\n            this.node.active = true\r\n            cc.tween(this.node)\r\n                .to(1, { scale: 1 })\r\n                .call(() => {\r\n                    resolve()\r\n                })\r\n                .start()\r\n\r\n        })\r\n    }\r\n}"]}