{"version":3,"sources":["assets\\Script\\GameControll.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import AssetMng from \"./Asset/AssetMng\";\r\nimport CameraControll from \"./Class/CameraControll\";\r\nimport Panel_Man from \"./Class/Mam/Panel_Man\";\r\nimport Panel_AniPath from \"./Class/Panel_AniPath\";\r\nimport Panel_Cloud from \"./Class/Panel_Cloud\";\r\nimport Panel_Door from \"./Class/Panel_Door\";\r\nimport Panel_Map from \"./Class/Panel_Map\";\r\nimport { GameEvent } from \"./Enum/GameEvent\";\r\nimport GameModle from \"./GameModle\";\r\nimport Panel_UI from \"./Class/UI/Panel_UI\";\r\nimport Panel_Message from \"./Class/Message/Panel_Message\";\r\nimport ComponentBase from \"./Data/base/ComponentBase\";\r\nimport { Commamnd } from \"./Enum/Commad\";\r\nimport Panel_Bear from \"./Class/Panel_Bear\";\r\nimport { GameState } from \"./Enum/GameState\";\r\nimport QALibrary from \"./Data/QA/QALibrary\";\r\nimport ChooseLibrary from \"./Data/QA/ChooseLibrary\";\r\nimport AnswerLibrary from \"./Data/QA/AnswerLibrary\";\r\nimport ExplainLibrary from \"./Data/QA/ExplainLibrary\";\r\nimport TrainInfoLibrary from \"./Data/TrainInfoLibrary\";\r\nimport PropsLibrary from \"./Data/QA/PropsLibrary\";\r\nimport { CameraState } from \"./Enum/CameraState\";\r\nimport Panel_Version from \"./Class/Panel_Version\";\r\nimport Panel_Test from \"./Class/Panel_Test\";\r\nimport { TrainType } from \"./Enum/TrainType\";\r\nimport { MyDelay } from \"./Data/DelayTime\";\r\nimport Panel_Bufer from \"./Class/Panel_Bufer\";\r\nimport MusciMng from \"./Data/base/MusciMng\";\r\nimport Panel_Loading from \"./Class/Panel_Loading\";\r\nimport EndGame from \"./Class/Message/EndGame\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Controll extends ComponentBase {\r\n\r\n    panel_AniPath: Panel_AniPath;\r\n    panel_Map: Panel_Map;\r\n    panel_Man: Panel_Man;\r\n    cameraControll: CameraControll;\r\n    panel_Door: Panel_Door;\r\n    panel_Cloud: Panel_Cloud;\r\n    panel_UI: Panel_UI;\r\n    panel_Message: Panel_Message\r\n    panel_Bear: Panel_Bear\r\n    panel_Version: Panel_Version\r\n    panel_Test: Panel_Test\r\n    panel_Bufer: Panel_Bufer\r\n    panel_Loading: Panel_Loading\r\n\r\n\r\n    onLoad() {\r\n\r\n        this.panel_Loading = cc.find(\"Canvas/Panel_Loading\").addComponent(Panel_Loading);\r\n        this.panel_AniPath = cc.find(\"Canvas/Panel_AniPath\").addComponent(Panel_AniPath);\r\n        this.panel_Map = cc.find(\"Canvas/Panel_Map\").addComponent(Panel_Map);\r\n        this.panel_Man = cc.find(\"Canvas/Panel_Man\").addComponent(Panel_Man);\r\n        this.cameraControll = cc.find(\"Canvas/MainCamera\").addComponent(CameraControll);\r\n        this.panel_Door = cc.find(\"Canvas/Panel_Door\").addComponent(Panel_Door);\r\n        this.panel_Cloud = cc.find(\"Canvas/Panel_Cloud\").addComponent(Panel_Cloud);\r\n        this.panel_UI = cc.find(\"Canvas/Panel_UI\").addComponent(Panel_UI);\r\n        this.panel_Bear = cc.find(\"Canvas/Panel_Bear\").addComponent(Panel_Bear);\r\n        this.panel_Bufer = cc.find(\"Canvas/Panel_Bufer\").addComponent(Panel_Bufer);\r\n\r\n\r\n\r\n        this.panel_Message = cc.find(\"Canvas/Panel_Message\").addComponent(Panel_Message);\r\n        this.panel_Version = cc.find(\"Canvas/Panel_Version\").addComponent(Panel_Version);\r\n\r\n        this.panel_Test = cc.find(\"Canvas/Panel_Test\").addComponent(Panel_Test);\r\n        if (CC_DEV)\r\n            this.panel_Test.show()\r\n        else\r\n            this.panel_Test.hide()\r\n\r\n\r\n        this.initEvent(GameEvent.SendModel, this.sendModle)\r\n        this.initEvent(GameEvent.SendCommand, this.sendCommand)\r\n        this.initEvent(GameEvent.GetStation, this.changeStationSprite)\r\n\r\n        AssetMng.startLoad();\r\n\r\n        fcc.configMgr\r\n            .setFrameWorkDebug(false)\r\n            .build()\r\n        let updateTime = cc.sys.os == cc.sys.OS_IOS ? 500 : 100\r\n        fcc.sceneMgr.sceneDirection = fcc.type.SceneDirectionType.LANDSCAPE\r\n        fcc.sceneMgr\r\n            .setDesignHeight(720)\r\n            .setDesignWidth(1280)\r\n            .updateSize(fcc.type.SceneStyleType.HORIZONTAL)\r\n            .startListener(updateTime)\r\n\r\n    }\r\n    start() {\r\n        let data = new postCmd()\r\n        data.cmd = \"StartLoading\"\r\n        //@ts-ignore\r\n        data.isRotated = cc.view._isRotated\r\n        GameModle.webPostMessage.send(data)\r\n\r\n        MusciMng.init()\r\n        this.panel_Version.setVersion(GameModle.version);\r\n        this.sendModle(GameEvent.InitMap);\r\n        this.EventEmit(GameEvent.CloseBufer)\r\n        GameModle.gameState = GameState.Wait\r\n        GameModle.webPostMessage.connect()\r\n\r\n        this.panel_Message.node.opacity = 255\r\n\r\n        this.panel_Door.reset()\r\n        this.checkData()\r\n    }\r\n    sendModle(type: string) {\r\n        switch (type) {\r\n            case GameEvent.InitMap:\r\n                this.EventEmit(type, this.panel_AniPath.TWPath);\r\n                break;\r\n            case GameEvent.BearSetModle:\r\n            case GameEvent.SetModel:\r\n                this.EventEmit(type, GameModle);\r\n                break;\r\n        }\r\n        // this.EventEmit(type)\r\n    }\r\n    changeStationSprite(_number: number) {\r\n        if (_number < 2 || _number > 19) return;\r\n        let _class = GameModle.mapSprite.get(_number)\r\n        if (_class.isGet) return;\r\n        _class.mySprite.spriteFrame = AssetMng.data_SprtieAtlas.get(\"Station_\" + _number.toString())\r\n        _class.getAction();\r\n    }\r\n    sendCommand(type: Commamnd, ...any: any[]) {\r\n        this[type](...any)\r\n    }\r\n    /**\r\n     * 流程\r\n     */\r\n    async checkData() {\r\n        // console.log(\"初始化檢查資料\");\r\n\r\n        GameModle.isEndLoadingData = false\r\n        this.panel_Loading.show()\r\n        //Test\r\n        await AssetMng.checkState();\r\n        // this.doorAgainGame()\r\n        GameModle.isEndLoadingData = true\r\n        this.panel_Loading.Actionhide()\r\n    }\r\n    async mainInit() {\r\n        this.panel_Version.node.active = false\r\n        MusciMng.effectPlay(\"DoorOpen\")\r\n        await this.panel_Door.openDoor()\r\n        await this.panel_Door.scaleAction()\r\n        MusciMng.effectPlay(\"maneyMixSound\")\r\n        await this.cameraControll.showAllView()\r\n        MusciMng.musicPlay(\"gameBG\")\r\n        await new MyDelay().setDelay(0.5)\r\n        await this.cameraControll.moveToManCamera()\r\n\r\n\r\n        // this.panel_Man.nowStation = 20\r\n        // GameModle.playData.level = 0 \r\n        // GameModle.playData.trainTypeNumber = 0\r\n        // GameModle.playData.trainType = TrainType.Type0\r\n        // this.endChoosTrain()\r\n        // return\r\n        this.panel_Man.manState = GameState.ShowMessage\r\n        await this.panel_Message.show()\r\n        this.panel_Message.choose_Ticket.show()\r\n\r\n        //test\r\n        // this.panel_Man.nowStation = 20\r\n        // GameModle.playData.level = 1\r\n        // this.endChooseTicket()\r\n\r\n        // this.showQA()\r\n        // this.showGetProps()\r\n        // this.panel_Message.question.show()\r\n    }\r\n    async endChooseTicket() {\r\n        GameModle.qaIndex = 0\r\n        GameModle.qaLibrary = new QALibrary(GameModle.playData.level, 3);\r\n        GameModle.chooseLibrary = new ChooseLibrary(GameModle.playData.level, GameModle.qaLibrary.qaLib_num)\r\n        GameModle.answerLibrary = new AnswerLibrary(GameModle.playData.level, GameModle.qaLibrary.qaLib_num)\r\n        GameModle.explainLibrary = new ExplainLibrary(GameModle.playData.level, GameModle.qaLibrary.qaLib_num)\r\n\r\n        // console.log(\"QA題庫：\" + GameModle.qaLibrary.qaLib_str);\r\n        // console.log(\"選向：\" + GameModle.chooseLibrary.chooseLib);\r\n        // console.log(\"問答：\" + GameModle.answerLibrary.answerLib_str);\r\n        // console.log(\"祥解：\" + GameModle.explainLibrary.explainLib);\r\n        this.panel_Message.choose_Ticket.hide()\r\n        this.panel_Message.choose_Train.initTrainSprite()\r\n        this.panel_Message.choose_Train.show()\r\n\r\n    }\r\n    async endChoosTrain() {\r\n        AssetMng.bearAsset(GameModle.playData.trainTypeNumber)\r\n        await new MyDelay().setDelay(2)\r\n\r\n        this.panel_Man.setManSprite(AssetMng.data_SprtieAtlas.get(GameModle.playData.trainType))\r\n        this.panel_Man.resetOeg()\r\n        this.panel_Bear.init()\r\n        // await this.panel_Message.choose_Train.getTrainAciton()\r\n        this.panel_Message.choose_Train.hide()\r\n        await this.panel_Message.hide()\r\n        this.panel_Man.manState = GameState.Wait\r\n        this.showTeaching()\r\n    }\r\n    async showTeaching() {\r\n        this.panel_UI.show()\r\n        this.panel_UI.openTeaching()\r\n    }\r\n    async endTeaching() {\r\n        GameModle.gameState = GameState.Start;\r\n        // this.panel_UI.station.chengeSprit()\r\n        this.panel_UI.setBtnEvent()\r\n        this.cameraControll.activeManCamera(true);\r\n        this.cameraControll.activeMineCamera(false);\r\n        this.panel_UI.props_Feature.setStart_Stop(true)\r\n        this.panel_Man.manGO()\r\n    }\r\n    async waitSignalLight() {\r\n        this.panel_UI.props_Feature.setStart_Stop(false)\r\n        if (this.panel_Man.isWaitSingnalLinght) return\r\n        // if (this.panel_Man.manState == GameState.WaitSignalLight) return;\r\n        // this.panel_Man.manState = GameState.WaitSignalLight\r\n\r\n        this.panel_Man.manStop()\r\n        await this.panel_Bear.checkState()\r\n        this.panel_UI.props_Feature.setStart_Stop(true)\r\n        this.panel_Man.manEndSignalLight()\r\n\r\n    }\r\n    async showVideo() {\r\n        GameModle.isVideoEnd = true\r\n        this.panel_Man.manState = GameState.ShowMessage\r\n        await this.panel_Message.show();\r\n        let data = new postCmd()\r\n        if (this.panel_UI.setting.itemMap.get(0).nowState) {//暫時這樣寫在另想好方法，指引到SettingBtn\r\n            MusciMng.swichEffect()\r\n            MusciMng.swichMusic()\r\n        }\r\n        switch (this.panel_Man.nowStation) {\r\n            case 1:\r\n                data.cmd = \"OpenView\"\r\n                data.viewType = 1\r\n                data.kid = false\r\n                GameModle.webPostMessage.send(data)\r\n                // console.log(\"播放安全影片\");\r\n                break\r\n            case 20:\r\n                let getKid = GameModle.playData.level == 0 ? true : false\r\n                data.cmd = \"OpenView\"\r\n                data.viewType = 2\r\n                data.kid = getKid;\r\n                GameModle.webPostMessage.send(data)\r\n                // console.log(\"播放廉政影片\");\r\n                break\r\n        }\r\n        // this.closeVideo();\r\n        // window.parent.postMessage({}, \"*\")\r\n    }\r\n    async closeVideo() {\r\n        if (!GameModle.isVideoEnd) return;\r\n        GameModle.isVideoEnd = false\r\n        if (this.panel_UI.setting.itemMap.get(0).nowState) {//暫時這樣寫在另想好方法，指引到SettingBtn\r\n            MusciMng.swichEffect()\r\n            MusciMng.swichMusic()\r\n        }\r\n        await this.panel_Message.hide();\r\n        this.panel_Man.manState = GameState.Wait\r\n        this.panel_UI.props_Feature.setStart_Stop(true)\r\n        this.panel_Man.manGO()\r\n    }\r\n    async showQA() {\r\n        let getQA = \"\"\r\n        let getChooese = \"\"\r\n\r\n        getQA = GameModle.qaLibrary.qaLib_str[GameModle.qaIndex]\r\n        getChooese = GameModle.chooseLibrary.chooseLib[GameModle.qaIndex]\r\n\r\n        this.panel_Message.question.reset()\r\n        this.panel_Message.question.setQAInfo(getQA, GameModle.playData.level, GameModle.qaLibrary.qaLib_num[GameModle.qaIndex])\r\n        this.panel_Message.question.setChoose(getChooese)\r\n        this.panel_Man.manState = GameState.ShowMessage\r\n        await this.panel_Message.show();\r\n        this.panel_Message.question.show();\r\n    }\r\n    async showAgainQA() {\r\n        this.panel_Message.qaAnswer.hide();\r\n        this.panel_Message.question.show();\r\n    }\r\n    async endQA() {\r\n        this.panel_Message.question.hide();\r\n        this.showAnswer()\r\n    }\r\n    async showAnswer() {\r\n        let getAnswer = \"\"\r\n        getAnswer = GameModle.answerLibrary.answerLib_str[GameModle.qaIndex].substring(0, 1)\r\n        this.panel_Message.qaAnswer.reset()\r\n        if (GameModle.chooseAnswer == getAnswer) {\r\n            MusciMng.effectPlay(\"True\")\r\n            this.panel_Message.qaAnswer.trueAnswer()\r\n        }\r\n        else {\r\n            this.panel_Message.qaAnswer.falseAnswer()\r\n            MusciMng.effectPlay(\"False\")\r\n        }\r\n\r\n        this.panel_Message.qaAnswer.show();\r\n    }\r\n    async endAnswer() {\r\n        this.panel_Message.qaAnswer.hide();\r\n        this.showGetProps();\r\n    }\r\n    async showExplain() {\r\n        this.panel_Message.qaAnswer.hide();\r\n        this.panel_Message.explain.setInfoStr(GameModle.explainLibrary.explainLib[GameModle.qaIndex]);\r\n        this.panel_Message.explain.show();\r\n    }\r\n    async endExplain() {\r\n        this.panel_Message.explain.hide();\r\n        this.showGetProps();\r\n    }\r\n\r\n    async showStationInfo(select: number) {\r\n        if (this.panel_Man.manState == GameState.ShowMessage) return\r\n        if (select == 5 || select == 11 || select == 15) return\r\n        if (this.panel_Man.manState != GameState.Wait)\r\n            this.panel_Man.manLineWait()\r\n\r\n        this.panel_Man.manState = GameState.ShowMessage\r\n        await this.panel_Message.show();\r\n        this.panel_Message.stationInfo.setTrainName(TrainInfoLibrary.getName(select))\r\n        this.panel_Message.stationInfo.setSprite(AssetMng.data_SprtieAtlas.get(\"StationInfo_\" + select.toString()))\r\n        this.panel_Message.stationInfo.setInfo(TrainInfoLibrary.getInfo(select))\r\n        this.panel_Message.stationInfo.show(); ``\r\n    }\r\n    async endTationInfo() {\r\n        this.panel_Message.stationInfo.hide();\r\n        await this.panel_Message.hide();\r\n        this.panel_Man.manState = GameState.Wait\r\n    }\r\n\r\n    async showGetProps() {\r\n        this.panel_Message.getProps.setData(\r\n            PropsLibrary.lib.get(this.panel_Man.nowStation),\r\n            AssetMng.data_SprtieAtlas.get(\"GetProps_\" + this.panel_Man.nowStation.toString())\r\n        )\r\n        this.panel_Message.getProps.show()\r\n\r\n        this.panel_UI.props_Feature.getProps(this.panel_Man.nowStation)\r\n        MusciMng.effectPlay(\"GetProps\")\r\n    }\r\n    async endGetProps() {\r\n        this.panel_Message.getProps.hide()\r\n        await this.panel_Message.hide();\r\n        this.panel_Man.manState = GameState.Wait\r\n        GameModle.qaIndex++//+兩個地方是因為玩家會有分支，因此在分支的末端加1Index\r\n\r\n        this.panel_UI.props_Feature.setStart_Stop(true)\r\n        this.panel_Man.manGO()\r\n    }\r\n    async showEndGame() {\r\n        this.panel_Man.manStop()\r\n        this.panel_Man.manState = GameState.ShowMessage\r\n\r\n        await this.panel_Message.show();\r\n        await AssetMng.checkState();\r\n        this.panel_Message.endGame.playBearSprite(GameModle.playData.trainTypeNumber);\r\n        this.panel_Message.endGame.show();\r\n    }\r\n    async closeEndGame() {\r\n        this.panel_Message.endGame.hide()\r\n        await this.panel_Message.hide();\r\n        this.panel_Man.manState = GameState.Wait\r\n    }\r\n    againGame() {\r\n        this.closeEndGame()\r\n        cc.director.loadScene(\"GameSence\");\r\n        MusciMng.musicStop()\r\n        MusciMng.effectAllStop()\r\n    }\r\n\r\n    async goLottery() {\r\n        this.closeEndGame()\r\n        MusciMng.effectPlay(\"maneyMixSound\")\r\n\r\n        await this.cameraControll.showAllView()\r\n        await this.panel_Door.backScaleAction()\r\n        await this.panel_Door.closeDoor()\r\n        this.panel_Loading.show()\r\n        this.panel_Loading.startLoading()\r\n        MusciMng.musicStop()\r\n        MusciMng.effectAllStop()\r\n        //活動結束拔除\r\n        // let data = new postCmd()\r\n        // data.cmd = \"OpenView\"\r\n        // data.viewType = -1\r\n        // data.kid = false\r\n        // GameModle.webPostMessage.send(data)\r\n\r\n        setTimeout(() => {\r\n            this.doorAgainGame()//穰遊戲整個重新，因為現在要跟網頁合作關係所以做法改變    \r\n        }, 500);\r\n\r\n        // console.log(\"遊戲結束Show抽獎與問答\");\r\n\r\n    }\r\n\r\n    endToBackGame() {\r\n        this.closeEndGame()\r\n        this.panel_Man.node.active = false\r\n        this.cameraControll.activeMineCamera(true)\r\n        this.cameraControll.activeManCamera(false)\r\n        this.cameraControll.moveToStation(GameModle.mapItem.get(0).node)\r\n        this.panel_UI.show()\r\n        this.panel_UI.props_Feature.hide()\r\n        this.panel_UI.setbtnEvent_Again()\r\n        this.panel_UI.backGameUse.show()\r\n    }\r\n    doorAgainGame() {\r\n        cc.director.loadScene(\"GameSence\");\r\n    }\r\n    async menGo() {\r\n        if (this.cameraControll.cameraState != CameraState.Men) {\r\n            await this.cameraControll.moveToManCamera(0.3)\r\n            this.panel_Man.manGO()\r\n        }\r\n    }\r\n    async manSkip() {\r\n        if (this.cameraControll.cameraState != CameraState.Men) {\r\n            await this.cameraControll.moveToManCamera(0.3)\r\n        }\r\n        this.panel_Man.manSkip()\r\n    }\r\n\r\n    manWait() {\r\n        this.panel_Man.manWait()\r\n    }\r\n    manLineWait() {\r\n        this.panel_Man.manLineWait()\r\n    }\r\n    async moveTarget(select: number) {\r\n        if (this.panel_Man.manState != GameState.Wait) {\r\n            this.panel_UI.props_Feature.setStart_Stop(false)\r\n            this.panel_Man.manLineWait()\r\n        }\r\n\r\n        this.panel_Message.stationInfo.reset()\r\n        this.cameraControll.activeManCamera(false);\r\n        this.cameraControll.activeMineCamera(true);\r\n        await this.cameraControll.moveToStation(GameModle.mapItem.get(select).node)\r\n\r\n    }\r\n    updataUIStart(setBoolea: boolean) {\r\n        this.panel_UI.props_Feature.setStart_Stop(setBoolea)\r\n    }\r\n    clinetClickStart_Stop() {\r\n        MusciMng.effectPlay(\"BtnClick\")\r\n\r\n        if (this.panel_Man.isWaitSingnalLinght) return\r\n        this.panel_UI.props_Feature.setStart_Stop()\r\n        //正在走\r\n        if (!this.panel_UI.props_Feature.isGo)\r\n            this.panel_Man.manWait()\r\n        else {\r\n            this.panel_Man.manGO()\r\n            this.menGo()\r\n        }\r\n    }\r\n    showAllView() {\r\n        this.cameraControll.activeManCamera(false);\r\n        this.cameraControll.activeMineCamera(true);\r\n        this.panel_Message.hide()\r\n        this.cameraControll.showAllView();\r\n    }\r\n    webCheckData() {\r\n        if (GameModle.isEndLoadingData) {\r\n            GameModle.isEndLoadingData = false //避免重複敲\r\n\r\n            let data = new postCmd()\r\n            data.cmd = 'Close'\r\n            //@ts-ignore\r\n            GameModle.webPostMessage.send(data)\r\n            //開始遊戲\r\n            this.mainInit()\r\n        }\r\n\r\n    }\r\n    //音樂的處理\r\n    public lateUpdate() {\r\n        //@ts-ignore\r\n        let context = cc.sys.__audioSupport.context;\r\n        if (context.state === 'suspended') {\r\n            context.resume();\r\n            // console.log(context.state);\r\n        }\r\n    }\r\n    protected update(dt: number): void {\r\n        // console.log(cc.audioEngine.getState(MusciMng.musicID));\r\n        // console.log(cc.audioEngine.getState(MusciMng.effectID.get('DoorOpen')));\r\n        // console.log(\"正在播放嗎?\" + cc.audioEngine.isMusicPlaying());\r\n\r\n        // cc.find(\"Panel_長寬測試/視窗\").getComponent(cc.Label).string = \"寬：\" + cc.view.getDesignResolutionSize().width + \"\\n高：\" + cc.view.getDesignResolutionSize().height\r\n        //@ts-ignore\r\n        // cc.find(\"Panel_長寬測試/旋轉\").getComponent(cc.Label).string = cc.view._isRotated.toString()\r\n        // cc.game.\r\n    }\r\n\r\n\r\n}\r\n\r\nclass postCmd {\r\n    cmd: string\r\n    viewType: number\r\n    kid: boolean\r\n    isRotated: boolean;\r\n}\r\n\r\n\r\n"]}